<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bunny Broken ğŸ’” SIM Database</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body, html {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: sans-serif;
    }
    /* ğŸ”¥ Video Background */
    #bgVideo {
      position: fixed;
      right: 0;
      bottom: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -1;
    }
    /* ğŸ”¥ Dark overlay */
    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0,0,0,0.6);
      z-index: -1;
    }
    /* ğŸ”¥ Animated Gradient Title */
    .bunny-title {
      font-weight: 900;
      background: linear-gradient(270deg, #ff0080, #7928ca, #00ffcc, #ffbf00, #ff0080);
      background-size: 1000% 1000%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: gradientMove 8s ease infinite;
      text-shadow: 0px 0px 25px rgba(255,255,255,0.5);
    }
    @keyframes gradientMove {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    /* Loader */
    .spinner {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-top: 4px solid #ff5f6d;
      border-radius: 50%;
      width: 40px; height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto 12px auto;
    }
    @keyframes spin { 0%{transform:rotate(0deg);} 100%{transform:rotate(360deg);} }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

<!-- ğŸ”¥ Background Video -->
<video autoplay muted loop id="bgVideo">
  <source src="images/background.mp4" type="video/mp4">
</video>
<div class="overlay"></div>

<!-- LOGIN SCREEN -->
<div id="loginPage" class="w-full max-w-md bg-white/10 backdrop-blur-xl rounded-2xl shadow-2xl p-8 border border-white/20 text-center">
  <h1 class="text-3xl bunny-title mb-6">
    ğŸ’” BUNNY BROKEN ğŸ’” <br> ğŸ­ DATABASE ğŸ­
  </h1>
  <input id="loginKey" type="password" placeholder="Enter Access Key"
         class="w-full px-4 py-3 mb-4 rounded-lg border border-white/30 bg-white/20 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-400" />
  <button onclick="checkLogin()" 
          class="w-full px-5 py-3 rounded-lg bg-gradient-to-r from-purple-600 via-pink-500 to-red-500 hover:opacity-90 text-white font-semibold shadow-lg">
    ğŸšª Enter
  </button>
  <p id="loginError" class="hidden text-red-400 mt-4 font-semibold">âŒ Wrong Key, Try Again!</p>
</div>

<!-- MAIN SCREEN -->
<div id="mainPage" class="hidden w-full max-w-3xl bg-white/10 backdrop-blur-xl rounded-2xl shadow-2xl p-8 border border-white/20 relative">

  <!-- ğŸ”¥ Logo Option -->
  <img src="images/logo.png" alt="Logo" class="mx-auto mb-4 w-24 h-24 rounded-full shadow-lg">

  <h1 class="text-4xl bunny-title font-extrabold text-center mb-8 tracking-wider">
    âš¡ Bunny Broken ğŸ’” <br> SIM Database
  </h1>

  <!-- Input & Button -->
  <div class="flex gap-3 mb-2">
    <input id="phoneInput" type="text" placeholder="Enter phone number (03xxxxxxxxx)" 
           class="flex-1 px-4 py-3 rounded-lg border border-white/30 bg-white/20 text-white placeholder-gray-300 focus:outline-none focus:ring-2 focus:ring-pink-400" />
    <button id="searchBtn" 
            class="px-5 py-3 rounded-lg bg-gradient-to-r from-purple-600 via-pink-500 to-red-500 hover:opacity-90 text-white font-semibold shadow-lg">
      ğŸ” Search
    </button>
  </div>

  <!-- Loading -->
  <div id="loadingArea" class="hidden text-center mt-6 text-white text-xl font-bold">
    <div class="spinner"></div>
    <p>Searching...</p>
  </div>

  <!-- Results -->
  <div id="resultArea" class="space-y-4 mt-6"></div>
</div>

<script>
function checkLogin(){
  const key = document.getElementById("loginKey").value;
  if(key === "1234"){  // âœ… Access key
    document.getElementById("loginPage").classList.add("hidden");
    document.getElementById("mainPage").classList.remove("hidden");
  } else {
    document.getElementById("loginError").classList.remove("hidden");
    setTimeout(()=>{ document.getElementById("loginError").classList.add("hidden"); },2000);
  }
}

const searchBtn = document.getElementById("searchBtn");
const phoneInput = document.getElementById("phoneInput");
const loadingArea = document.getElementById("loadingArea");
const resultArea = document.getElementById("resultArea");

searchBtn.addEventListener("click", async () => {
  const phone = phoneInput.value.trim();
  if (!phone) {
    alert("âš ï¸ Please enter a phone number!");
    return;
  }

  resultArea.innerHTML = "";
  loadingArea.classList.remove("hidden");

  try {
    const res = await fetch(`/api/search?phone=${phone}`);
    const data = await res.json();
    loadingArea.classList.add("hidden");

    if (data.records && data.records.length > 0) {
      data.records.forEach((record) => {
        const card = document.createElement("div");
        card.className = `p-6 rounded-xl shadow-2xl text-white border border-white/20`;
        card.style.backgroundImage = "url('images/card.jpg')"; // âœ… Card background
        card.style.backgroundSize = "cover";
        card.style.backgroundPosition = "center";

        card.innerHTML = `
          <h2 class="text-xl font-bold mb-2">ğŸ¥° Han Meri Jan Apki Mission Completed ğŸ™ˆ</h2>
          <p class="mb-1"><strong>ğŸ‘¤ Name:</strong> ${record.Name || "N/A"}</p>
          <p class="mb-1"><strong>ğŸ“± Mobile:</strong> ${record.Mobile || "N/A"}</p>
          <p class="mb-1"><strong>ğŸŒ Country:</strong> ${record.Country || "N/A"}</p>
          <p class="mb-1"><strong>ğŸ†” CNIC:</strong> ${record.CNIC || "N/A"}</p>
          <p class="mb-3"><strong>ğŸ  Address:</strong> ${record.Address || "N/A"}</p>
          <button onclick="copyDetails(this)" class="px-4 py-2 rounded-lg bg-black/40 hover:bg-black/60 text-white">ğŸ“‹ Copy</button>
        `;
        resultArea.appendChild(card);
      });
    } else {
      resultArea.innerHTML = `<p class="text-red-300 font-semibold text-center text-xl">ğŸ™ˆ Sorry, Apki Data Available Nahi</p>`;
    }
  } catch (error) {
    loadingArea.classList.add("hidden");
    resultArea.innerHTML = `<p class="text-red-300 font-semibold text-center">âš ï¸ Error fetching data.</p>`;
  }
});

// âœ… Copy function
function copyDetails(btn){
  const text = btn.parentElement.innerText;
  navigator.clipboard.writeText(text);
  btn.innerText = "âœ… Copied!";
  setTimeout(()=>{ btn.innerText="ğŸ“‹ Copy"; },2000);
}
</script>

</body>
</html>
